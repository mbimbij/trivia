<app-rename-user></app-rename-user>
<br>
<app-create-game></app-create-game>

<ng-container *ngIf="(gameService.getGames() | async) as games">
  <ng-container *ngIf="(userService.getUser() | async) as user">
    <table>
      <tr>
        <th>id</th>
        <th>name</th>
        <th>creator</th>
        <th>players</th>
        <th>status</th>
        <th>join</th>
        <th>start</th>
        <th>go to</th>
        <th>delete</th>
      </tr>
      <tr [ngClass]="'game-row'" *ngFor="let game of games; trackBy: trackByFn">
        <td class="id">{{ game.id }}</td>
        <td class="name">
          <a
            [attr.data-testid]="'game-details-'+game.id"
            [routerLink]="['/games',game.id,'details']"
          >
            {{ game.name }}
          </a>
        </td>
        <td class="creator-name">{{ game.creator.name }}</td>
        <td class="players-names">{{ game.players | objectAttribute: 'name' }}</td>
        <td class="state">{{ game.state }}</td>
        <td class="join">
          <app-join-game-button [game]="game" [user]="user"/>
        </td>
        <td class="start">
          <app-start-game-button [game]="game" [userId]="user.id"/>
        </td>
        <td class="goto">
          <app-goto-game-button [game]="game" [userId]="user.id"/>
        </td>
        <td class="delete">
          <app-delete-game-button [game]="game"/>
        </td>
      </tr>
    </table>
  </ng-container>
</ng-container>

<ng-template #tpl>
  <div>template</div>
</ng-template>
{{ checkRender() }}
